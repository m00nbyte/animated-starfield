/*
    â’¸ 2024 m00nbyte

    package:  @m00nbyte/animated-starfield
    version:  1.0.0
    date:     Fri, 01 Nov 2024 22:48:28 GMT
*/
var animatedStarField=function(){"use strict";const t=(s,e)=>{const i=t=>null!==t&&"object"==typeof t;for(const[n,o]of Object.entries(e)){const e=s[n];i(e)&&i(o)?s[n]=t(e,o):void 0!==o&&(s[n]=o)}return s};class s{type;x;y;color;size;direction;speed;blink;opacity;delay;constructor(t,s,e,i,n,o,a,r){this.type=t,this.x=s,this.y=e,this.color=i,this.size=n,this.direction=o,this.speed=a,this.blink=r,this.opacity=1,this.delay=2e3*Math.random()+1e3*Math.random()}update(t){const{speed:s,direction:e,blink:i,delay:n}=this;if(i>0){const s=Math.sin((t+n)/i*Math.PI);this.opacity=.5+.5*Math.abs(s)}if(s>0&&null!==e){const t=(e+90)*(Math.PI/180),i=Math.cos(t)*s,n=Math.sin(t)*s;this.x+=i,this.y+=n}}}class e{options;canvas;context;stars;width;height;parent;constructor(t,s){const{direction:e,sizes:i}=s;this.parent=t,this.options=s,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.style.position="absolute",t.appendChild(this.canvas);const{clientWidth:n,clientHeight:o}=this.parent;this.width=n,this.height=o,this.stars=this.generateStars(i,e),this.resizeCanvas(),this.animateStars(),window.addEventListener("resize",(()=>this.handleResize()))}resizeCanvas(){const{clientWidth:t,clientHeight:s}=this.parent;this.width=t,this.height=s,this.canvas.width=t,this.canvas.height=s}handleResize(){const t=this.width,s=this.height;this.resizeCanvas();const e=this.width/t,i=this.height/s;for(const t of this.stars)t.x*=e,t.y*=i}drawStar(t){const{x:s,y:e,size:i,opacity:n,color:o}=t,{context:a}=this;a.beginPath(),a.arc(s,e,i,0,2*Math.PI),o.startsWith("rgb")||o.startsWith("hsl")?a.fillStyle=o.replace(")",`, ${n})`).replace("rgb","rgba").replace("hsl","hsla"):(a.globalAlpha=n,a.fillStyle=o),a.fill(),a.globalAlpha=1}generateStars(t,e){const i=[],n={small:.5,medium:1,large:1.5},o=t=>Math.random()*t;for(const[a,{amount:r,color:h,speed:c,blink:l}]of Object.entries(t)){const t=n[a];if(t)for(let n=0;n<r;n++){const{width:n,height:r}=this,d=o(n),p=o(r),f=-1===e?360*Math.random():e??0,u=null===e?0:c;i.push(new s(a,d,p,h,t,f,u,l))}}return i}animateStars(){const{context:t,width:s,height:e,options:i,stars:n}=this,o=performance.now();t.clearRect(0,0,s,e),t.fillStyle=i.background,t.fillRect(0,0,s,e);const a=(t,s)=>t<0?s:t>s?0:t,r=t=>Math.random()*t;for(const t of n)t.update(o),this.drawStar(t),t.x=a(t.x,s),t.y=a(t.y,e),0!==t.x&&t.x!==s||(t.y=r(e)),0!==t.y&&t.y!==e||(t.x=r(s));requestAnimationFrame((()=>this.animateStars()))}updateOptions(s){const e=structuredClone?structuredClone(s):JSON.parse(JSON.stringify(s));e.hasOwnProperty("container")&&delete e.container,this.options=t(this.options,e);const{background:i,direction:n,sizes:o}=e;void 0!==i&&(this.options.background=i);for(const t of this.stars){if(null===n){t.direction=0,t.speed=0;continue}const{color:s,speed:e}=o[t.type];t.color=s??t.color,t.direction=-1===n?360*Math.random():n??t.direction,t.speed=e??t.speed}if(o){const{sizes:t,direction:s}=this.options;this.stars=this.generateStars(t,s)}}}return s=>{const i=t({background:"#141d27",direction:0,sizes:{small:{amount:50,color:"#ffffff",speed:.8,blink:2e3},medium:{amount:50,color:"#ffffff",speed:.6,blink:2e3},large:{amount:50,color:"#ffffff",speed:.5,blink:2e3}}},s),n=i.container;if(!n)return null;const o=document.querySelector(n);return o?new e(o,i):null}}();
